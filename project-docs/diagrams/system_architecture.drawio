<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-06-22T12:00:00.000Z" agent="5.0" etag="xxx" version="21.7.5" type="device">
  <diagram name="System Architecture" id="system-arch">
    <mxGraphModel dx="1422" dy="754" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 用户层 -->
        <mxCell id="user-layer" value="用户交互层 (User Interface Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="80" y="40" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- Web前端 -->
        <mxCell id="web-frontend" value="Web前端界面&#xa;(Vue.js + TypeScript)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="120" y="80" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 语音交互 -->
        <mxCell id="voice-interface" value="语音交互界面&#xa;(Vosk + TTS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="320" y="80" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 管理界面 -->
        <mxCell id="admin-interface" value="管理员界面&#xa;(任务监控)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="520" y="80" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- API网关层 -->
        <mxCell id="api-layer" value="API服务层 (API Service Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="80" y="160" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- FastAPI服务 -->
        <mxCell id="fastapi-service" value="FastAPI服务&#xa;(REST API)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="120" y="200" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 认证服务 -->
        <mxCell id="auth-service" value="认证服务&#xa;(JWT + 三级认证)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="320" y="200" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 任务管理 -->
        <mxCell id="task-service" value="任务管理服务&#xa;(调度 + 队列)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="520" y="200" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- WebSocket -->
        <mxCell id="websocket-service" value="WebSocket服务&#xa;(实时通信)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="720" y="200" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 业务逻辑层 -->
        <mxCell id="business-layer" value="业务逻辑层 (Business Logic Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="80" y="280" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- 配送管理 -->
        <mxCell id="delivery-manager" value="配送管理器&#xa;(DeliveryManager)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1ffc7;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="120" y="320" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 路径优化 -->
        <mxCell id="path-optimizer" value="路径优化器&#xa;(PathOptimizer)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1ffc7;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="320" y="320" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 安全管理 -->
        <mxCell id="security-manager" value="安全管理器&#xa;(SecurityManager)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1ffc7;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="520" y="320" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- ROS2通信层 -->
        <mxCell id="ros2-layer" value="ROS2通信层 (ROS2 Communication Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="80" y="400" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- ROS2桥接 -->
        <mxCell id="ros2-bridge" value="ROS2桥接器&#xa;(Python rclpy)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="120" y="440" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 导航控制 -->
        <mxCell id="nav-controller" value="导航控制器&#xa;(Nav2集成)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="320" y="440" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 状态监控 -->
        <mxCell id="status-monitor" value="状态监控器&#xa;(ROS2 Topics)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="520" y="440" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 机器人控制层 -->
        <mxCell id="robot-layer" value="机器人控制层 (Robot Control Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="80" y="520" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- Nav2导航 -->
        <mxCell id="nav2-stack" value="Nav2导航栈&#xa;(路径规划+定位)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="120" y="560" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- SLAM -->
        <mxCell id="slam-system" value="SLAM系统&#xa;(地图构建)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="320" y="560" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 传感器融合 -->
        <mxCell id="sensor-fusion" value="传感器融合&#xa;(LiDAR+IMU)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="520" y="560" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 仿真环境 -->
        <mxCell id="simulation-env" value="Webots仿真环境&#xa;(虚拟机器人)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="720" y="560" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 数据存储层 -->
        <mxCell id="storage-layer" value="数据存储层 (Data Storage Layer)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="80" y="640" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <!-- SQLite数据库 -->
        <mxCell id="sqlite-db" value="SQLite数据库&#xa;(任务+用户数据)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffeaa7;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="120" y="680" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 日志系统 -->
        <mxCell id="log-system" value="日志系统&#xa;(操作记录)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffeaa7;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="320" y="680" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 配置管理 -->
        <mxCell id="config-store" value="配置存储&#xa;(系统参数)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffeaa7;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="520" y="680" width="160" height="60" as="geometry" />
        </mxCell>
        
        <!-- 连接线 -->
        <!-- 用户层到API层 -->
        <mxCell id="edge1" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="web-frontend" target="fastapi-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="160" as="sourcePoint" />
            <mxPoint x="250" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="voice-interface" target="auth-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="160" as="sourcePoint" />
            <mxPoint x="450" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge3" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="admin-interface" target="task-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="160" as="sourcePoint" />
            <mxPoint x="650" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- API层到业务层 -->
        <mxCell id="edge4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="fastapi-service" target="delivery-manager">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="280" as="sourcePoint" />
            <mxPoint x="250" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge5" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="task-service" target="path-optimizer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="280" as="sourcePoint" />
            <mxPoint x="400" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge6" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="auth-service" target="security-manager">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="280" as="sourcePoint" />
            <mxPoint x="600" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- 业务层到ROS2层 -->
        <mxCell id="edge7" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="delivery-manager" target="ros2-bridge">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="400" as="sourcePoint" />
            <mxPoint x="250" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="path-optimizer" target="nav-controller">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="security-manager" target="status-monitor">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- ROS2层到机器人层 -->
        <mxCell id="edge10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ros2-bridge" target="nav2-stack">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="520" as="sourcePoint" />
            <mxPoint x="250" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge11" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="nav-controller" target="slam-system">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="520" as="sourcePoint" />
            <mxPoint x="450" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge12" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="status-monitor" target="sensor-fusion">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="520" as="sourcePoint" />
            <mxPoint x="650" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- 存储层连接线 -->
        <mxCell id="edge13" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" edge="1" parent="1" source="delivery-manager" target="sqlite-db">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="640" as="sourcePoint" />
            <mxPoint x="250" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
